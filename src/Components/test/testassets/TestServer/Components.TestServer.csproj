<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>$(DefaultNetCoreTargetFramework)</TargetFramework>
    <!-- This is so that we add the FrameworkReference to Microsoft.AspNetCore.App -->
    <UseLatestAspNetCoreReference>true</UseLatestAspNetCoreReference>
  </PropertyGroup>

  <ItemGroup>
    <Reference Include="Microsoft.AspNetCore.Components.WebAssembly.Server" />
    <Reference Include="Microsoft.Extensions.Logging.Testing" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\WebAssembly\DevServer\src\Microsoft.AspNetCore.Components.WebAssembly.DevServer.csproj" />
    <ProjectReference Include="..\BasicTestApp\BasicTestApp.csproj" />
  </ItemGroup>

  <ItemGroup>
    <AssemblyAttribute Include="System.Reflection.AssemblyMetadataAttribute">
      <_Parameter1>Microsoft.AspNetCore.Testing.BasicTestApp.ContentRoot</_Parameter1>
      <_Parameter2>$([MSBuild]::NormalizeDirectory('$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..\BasicTestApp'))'))</_Parameter2>
    </AssemblyAttribute>
  </ItemGroup>

  <Target Name="CopyClientAssetsForTest" BeforeTargets="Build"
          Inputs="..\BasicTestApp\wwwroot\js\jsinteroptests.js;
                  ..\BasicTestApp\wwwroot\NotAComponent.html;
                  ..\BasicTestApp\wwwroot\style.css"
          Outputs="wwwroot\js\jsinteroptests.js;
                   wwwroot\NotAComponent.html;
                   wwwroot\style.css">

    <MakeDir Directories="wwwroot" />

    <Copy SourceFiles="..\BasicTestApp\wwwroot\js\jsinteroptests.js;..\BasicTestApp\wwwroot\NotAComponent.html;..\BasicTestApp\wwwroot\style.css"
          DestinationFiles="wwwroot\js\jsinteroptests.js;wwwroot\NotAComponent.html;wwwroot\style.css" />
  </Target>
</Project>
